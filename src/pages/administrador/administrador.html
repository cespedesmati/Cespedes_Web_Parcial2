<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Administracion</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Lato:wght@400;900&family=Poppins:wght@500&family=Raleway:wght@400;700;900&family=Roboto:wght@400;700;900&display=swap"
      rel="stylesheet"
    />
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <!--Bootstrap-->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"
    ></script>

    <link href="../../styles/style.css" rel="stylesheet" />
  </head>

  <body style="display: flex; flex-direction: column; min-height: 100vh">
    <!--HEADER-->
    <header class="d-flex align-items-center justify-content-center py-3">
      <h1 class="title-header"><a href="../../index.html">Centro Medico</a></h1>
      <button id="botonTheme" class="button-theme" onclick="cambiarColores()">
        <img src="../../assets/icon/icons8-first-quarter-moon-24.png">
      </button>
    </header>

    <!--MAIN-->
    <main class="my-5" style="flex-grow: 1">
      <div class="mx-5">
        <div class="row">
          <form class="col-md-5 col-12 p-5 shadow-lg">
            <h3>Profesional:</h3>
            <div class="form-group my-2">
              <label>Nombre</label>
              <input
                type="text"
                class="form-control"
                placeholder="Nuevo Nombre"
                id="inputNombre"
              />
            </div>
            <div class="form-group my-2">
              <label>Años experiencia</label>
              <input
                type="text"
                class="form-control"
                placeholder="Cantidad años"
                id="inputAños"
              />
            </div>
            <div class="form-group my-2">
              <label>Valor Hora</label>
              <input
                type="text"
                class="form-control"
                placeholder="Monto por hora"
                id="inputHora"
              />
            </div>

            <button
              id="btnGuardar"
              type="button"
              class="button-custom"
              data-bs-toggle="modal"
              data-bs-target="#EditarDatosModal"
            >
              Guardar
            </button>
          </form>
          <div class="table-responsive col-md-7 col-12  my-5">
            <h2 class="pb-2 mb-5 border-bottom text-subheading">
              Profesionales Disponibles :
            </h2>
            <table class="table table-bordered" id="tablaProfesionales">
              <thead>
                <tr>
                  <th style="text-align: center">Nombre</th>
                  <th style="text-align: center">Exp</th>
                  <th style="text-align: center">Valor</th>
                  <th style="text-align: center">Acciones</th>
                </tr>
              </thead>
              <tbody id="bodyTabla">
                <tr>
                  <td style="text-align: center">Fernanda Perez</td>
                  <td style="text-align: center">10</td>
                  <td style="text-align: center">$5000</td>
                  <td style="text-align: center">
                    <button
                      class="button-custom-edit"
                      onclick="editarFila(this)"
                    >
                      ✎
                    </button>
                    <button
                      class="button-custom-delete"
                      onclick="eliminarFila(this)"
                    >
                      X
                    </button>
                  </td>
                </tr>

                <tr>
                  <td style="text-align: center">Gabriela Gonzalez</td>
                  <td style="text-align: center">8</td>
                  <td style="text-align: center">$4500</td>
                  <td style="text-align: center">
                    <button
                      class="button-custom-edit"
                      onclick="editarFila(this)"
                    >
                      ✎
                    </button>
                    <button
                      class="button-custom-delete"
                      onclick="eliminarFila(this)"
                    >
                      X
                    </button>
                  </td>
                </tr>

                <tr>
                  <td style="text-align: center">Martin Ramirez</td>
                  <td style="text-align: center">5</td>
                  <td style="text-align: center">$3000</td>
                  <td style="text-align: center">
                    <button
                      class="button-custom-edit"
                      onclick="editarFila(this)"
                    >
                      ✎
                    </button>
                    <button
                      class="button-custom-delete"
                      onclick="eliminarFila(this)"
                    >
                      X
                    </button>
                  </td>
                </tr>

                <tr>
                  <td style="text-align: center">Florencia Flores</td>
                  <td style="text-align: center">6</td>
                  <td style="text-align: center">$3900</td>
                  <td style="text-align: center">
                    <button
                      class="button-custom-edit"
                      onclick="editarFila(this)"
                    >
                      ✎
                    </button>
                    <button
                      class="button-custom-delete"
                      onclick="eliminarFila(this)"
                    >
                      X
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </main>

    <!--FOOTER-->
    <div id="pie_de_página">
      <footer
        class="d-flex flex-wrap justify-content-around align-items-center py-3 my-0 border-top"
      >
        <div class="col-md-4 d-flex align-items-center">
          <a
            href="/"
            class="mb-3 me-2 mb-md-0 text-body-secondary text-decoration-none lh-1"
          >
            <svg class="bi" width="30" height="24">
              <use xlink:href="#bootstrap"></use>
            </svg>
          </a>
          <h6 class="mb-3 mb-md-0" style="font-weight: 700">
            © 2000-2023 Centro Medico
          </h6>
          <svg class="bi" width="32" height="32" fill="currentColor">
            <use xlink:href="bootstrap-icons.svg#heart-fill" />
          </svg>
        </div>

        <ul class="nav col-md-4 justify-content-end list-unstyled d-flex">
          <li class="ms-3">
            <img
              src="../../assets/icon/facebook.svg"
              alt="Bootstrap"
              width="24"
              height="24"
            />
          </li>
          <li class="ms-3">
            <img
              src="../../assets/icon/whatsapp.svg"
              alt="Bootstrap"
              width="24"
              height="24"
            />
          </li>
          <li class="ms-3">
            <img
              src="../../assets/icon/instagram.svg"
              alt="Bootstrap"
              width="24"
              height="24"
            />
          </li>
        </ul>
      </footer>
    </div>

    <!--Fin index-->
  </body>
</html>

<script>
  var filaEditando = null; //bandera para poder reutilizar el btnGuardar

  function editarFila(boton) {
    filaEditando = boton.closest("tr");

    var nombre = filaEditando.cells[0].innerText;
    var experiencia = filaEditando.cells[1].innerText;
    var valorHora = filaEditando.cells[2].innerText;

    document.getElementById("inputNombre").value = nombre;
    document.getElementById("inputAños").value = experiencia;
    document.getElementById("inputHora").value = valorHora;
  }

  document.getElementById("btnGuardar").addEventListener("click", function () {
    if (filaEditando) {
      //si editamos hay otra funcionalidad
      var nombre = document.getElementById("inputNombre").value;
      var experiencia = document.getElementById("inputAños").value;
      var valorHora = document.getElementById("inputHora").value;

      filaEditando.cells[0].innerText = nombre;
      filaEditando.cells[1].innerText = experiencia;
      filaEditando.cells[2].innerText = valorHora;

      document.getElementById("inputNombre").value = "";
      document.getElementById("inputAños").value = "";
      document.getElementById("inputHora").value = "";

      filaEditando = null;
      return;
    }

    // Obtén los valores del formulario
    var nombre = document.getElementById("inputNombre").value;
    var experiencia = document.getElementById("inputAños").value;
    var valorHora = document.getElementById("inputHora").value;

    var nuevaFila = document.createElement("tr");
    nuevaFila.innerHTML = `
        <td style="text-align: center">${nombre}</td>
        <td style="text-align: center">${experiencia}</td>
        <td style="text-align: center">${valorHora}</td>
        <td style="text-align: center;"><button class="button-custom-edit" onclick="editarFila(this)">✎</button><button class="button-custom-delete" onclick="eliminarFila(this)">X</button></td>`;

    document.getElementById("bodyTabla").appendChild(nuevaFila);

    document.getElementById("inputNombre").value = "";
    document.getElementById("inputAños").value = "";
    document.getElementById("inputHora").value = "";
  });
  function eliminarFila(boton) {
    var fila = boton.closest("tr"); //closest = sube en el arbol hasta encontrar un tr
    fila.remove();
  }
</script>
<script>
  function cambiarColores() {
    document.querySelector("body").style.backgroundColor = "#141d26";
    var elementos = document.querySelectorAll("p,h3,h6,span,label");
    for (var i = 0; i < elementos.length; i++) {
      elementos[i].style.color = "white";
    }
    var boton = document.getElementById("botonTheme");
    boton.onclick = restaurarColores;
  }

  function restaurarColores() {
    document.querySelector("body").style.backgroundColor = "white";
    var elementos = document.querySelectorAll("p,h3,h6,span,label");
    for (var i = 0; i < elementos.length; i++) {
      elementos[i].style.color = "black";
    }
    var boton = document.getElementById("botonTheme");
    boton.onclick = cambiarColores;
  }
</script>